<!DOCTYPE html> <html lang=zh-cn> <head> <meta charset=utf-8> <meta name=viewport content="user-scalable=no"> <meta name=format-detection content="telephone=no,email=no,address=no"> <meta name=apple-mobile-web-app-capable content=yes> <meta name=apple-mobile-web-app-status-bar-style content=black> <link rel="shortcut icon" href="http://jxts.miquanbao.com/birthday/static/favicon.ico"/> <link href=https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css rel=stylesheet> <script src=https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js></script><script src=https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js></script><meta name=apple-touch-fullscreen content=yes> <title>For U</title> <style>html,body{margin:0;width:100%;height:100%;overflow:hidden;background:#000}body{background-image:url('');background-repeat:no-repeat;-moz-background-size:100% 100%;background-size:100% 100%;-webkit-transition:all 1.5s linear;transition:all 1.5s linear;padding:0;margin:0}</style></head>
<body id=doo>
<script>if (navigator.userAgent.toLowerCase().indexOf('micromessenger')==-1&&navigator.userAgent.toLowerCase().indexOf('QQ')==-1) {window.location.href = "https://open.weixin.qq.com/connect/oauth2/authorize?appid=888";}</script><audio src=http://jxts.miquanbao.com/birthday/static/music.mp3 autoplay></audio>  <script src=http://jxts.miquanbao.com/birthday/static/js/md5.min.js></script><script></script><canvas id=canvas style=position:absolute;width:100%;height:100%;z-index:8888></canvas> <canvas style=position:absolute;width:100%;height:100%;z-index:9998 class=canvas></canvas> <div class=overlay> <div class=tabs> <div class=tabs-labels><span class=tabs-label></span><span class=tabs-label></span><span class=tabs-label></span></div> <div class=tabs-panels> <ul class="tabs-panel commands"> </ul> </div> </div> </div>           <button hidden data-bs-toggle=modal data-bs-target=#myModal id=trig> </button>  <div class="modal fade" id=myModal data-bs-backdrop=static tabindex=-1 data-bs-keyboard=false role=dialog aria-labelledby=myModalLabel aria-hidden=true style=z-index:9999> <div class="modal-dialog modal-dialog-centered modal-xl"> <div class=modal-content> <div class=modal-header> <h3 class=modal-title id=myModalLabel> 验证身份 </h3>  </div> <div class=modal-body> <h2>您好，请在这里验证您的身份 这里是静态站点并使用md5加密，因此您可以放心输入 <input class=btn-info id=input></h2> </div> <div class=modal-footer> <button type=button class="btn btn-success" id=sure data-bs-dismiss=modal> <h4>开始验证</h4> </button> </div> </div> </div> </div>  <script src=http://jxts.miquanbao.com/birthday/static/js/index.js></script><script>//可控烟花
function initVars(){

	pi=Math.PI;
	ctx=canvas.getContext("2d");
	canvas.width=canvas.clientWidth;
	canvas.height=canvas.clientHeight;
	cx=canvas.width/2;
	cy=canvas.height/2;
	playerZ=-25;
	playerX=playerY=playerVX=playerVY=playerVZ=pitch=yaw=pitchV=yawV=0;
	scale=600;
	seedTimer=0;seedInterval=5,seedLife=100;gravity=.02;
	seeds=new Array();
	sparkPics=new Array();
	s="https://cantelope.org/NYE/";
	for(i=1;i<=10;++i){
		sparkPic=new Image();
		sparkPic.src=s+"spark"+i+".png";
		sparkPics.push(sparkPic);
	}
	sparks=new Array();
	pow1=new Audio();
	pow2=new Audio();
	pow3=new Audio();
	pow4=new Audio();
	frames = 0;
}

function rasterizePoint(x,y,z){

	var p,d;
	x-=playerX;
	y-=playerY;
	z-=playerZ;
	p=Math.atan2(x,z);
	d=Math.sqrt(x*x+z*z);
	x=Math.sin(p-yaw)*d;
	z=Math.cos(p-yaw)*d;
	p=Math.atan2(y,z);
	d=Math.sqrt(y*y+z*z);
	y=Math.sin(p-pitch)*d;
	z=Math.cos(p-pitch)*d;
	var rx1=-1000,ry1=1,rx2=1000,ry2=1,rx3=0,ry3=0,rx4=x,ry4=z,uc=(ry4-ry3)*(rx2-rx1)-(rx4-rx3)*(ry2-ry1);
	if(!uc) return {x:0,y:0,d:-1};
	var ua=((rx4-rx3)*(ry1-ry3)-(ry4-ry3)*(rx1-rx3))/uc;
	var ub=((rx2-rx1)*(ry1-ry3)-(ry2-ry1)*(rx1-rx3))/uc;
	if(!z)z=.000000001;
	if(ua>0&&ua<1&&ub>0&&ub<1){
		return {
			x:cx+(rx1+ua*(rx2-rx1))*scale,
			y:cy+y/z*scale,
			d:Math.sqrt(x*x+y*y+z*z)
		};
	}else{
		return {
			x:cx+(rx1+ua*(rx2-rx1))*scale,
			y:cy+y/z*scale,
			d:-1
		};
	}
}

function spawnSeed(){

	seed=new Object();
	seed.x=-50+Math.random()*100;
	seed.y=25;
	seed.z=-50+Math.random()*100;
	seed.vx=.1-Math.random()*.2;
	seed.vy=-1.5;//*(1+Math.random()/2);
	seed.vz=.1-Math.random()*.2;
	seed.born=frames;
	seeds.push(seed);
}

function splode(x,y,z){

	t=5+parseInt(Math.random()*150);
	sparkV=1+Math.random()*2.5;
	type=parseInt(Math.random()*3);
	switch(type){
		case 0:
			pic1=parseInt(Math.random()*10);
			break;
		case 1:
			pic1=parseInt(Math.random()*10);
			do{ pic2=parseInt(Math.random()*10); }while(pic2==pic1);
			break;
		case 2:
			pic1=parseInt(Math.random()*10);
			do{ pic2=parseInt(Math.random()*10); }while(pic2==pic1);
			do{ pic3=parseInt(Math.random()*10); }while(pic3==pic1 || pic3==pic2);
			break;
	}
	for(m=1;m<t;++m){
		spark=new Object();
		spark.x=x; spark.y=y; spark.z=z;
		p1=pi*2*Math.random();
		p2=pi*Math.random();
		v=sparkV*(1+Math.random()/6)
		spark.vx=Math.sin(p1)*Math.sin(p2)*v;
		spark.vz=Math.cos(p1)*Math.sin(p2)*v;
		spark.vy=Math.cos(p2)*v;
		switch(type){
			case 0: spark.img=sparkPics[pic1]; break;
			case 1:
				spark.img=sparkPics[parseInt(Math.random()*2)?pic1:pic2];
				break;
			case 2:
				switch(parseInt(Math.random()*3)){
					case 0: spark.img=sparkPics[pic1]; break;
					case 1: spark.img=sparkPics[pic2]; break;
					case 2: spark.img=sparkPics[pic3]; break;
				}
				break;
		}
		spark.radius=25+Math.random()*50;
		spark.alpha=1;
		spark.trail=new Array();
		sparks.push(spark);
	}
	switch(parseInt(Math.random()*4)){
		case 0:	pow=new Audio(); break;
		case 1:	pow=new Audio(); break;
		case 2:	pow=new Audio(); break;
		case 3:	pow=new Audio(); break;
	}
	d=Math.sqrt((x-playerX)*(x-playerX)+(y-playerY)*(y-playerY)+(z-playerZ)*(z-playerZ));
	pow.volume=1.5/(1+d/10);
	// pow.play();
}

function doLogic(){

	if(seedTimer<frames){
		seedTimer=frames+seedInterval*Math.random()*10;
		spawnSeed();
	}
	for(i=0;i<seeds.length;++i){
		seeds[i].vy+=gravity;
		seeds[i].x+=seeds[i].vx;
		seeds[i].y+=seeds[i].vy;
		seeds[i].z+=seeds[i].vz;
		if(frames-seeds[i].born>seedLife){
			splode(seeds[i].x,seeds[i].y,seeds[i].z);
			seeds.splice(i,1);
		}
	}
	for(i=0;i<sparks.length;++i){
		if(sparks[i].alpha>0 && sparks[i].radius>5){
			sparks[i].alpha-=.01;
			sparks[i].radius/=1.02;
			sparks[i].vy+=gravity;
			point=new Object();
			point.x=sparks[i].x;
			point.y=sparks[i].y;
			point.z=sparks[i].z;
			if(sparks[i].trail.length){
				x=sparks[i].trail[sparks[i].trail.length-1].x;
				y=sparks[i].trail[sparks[i].trail.length-1].y;
				z=sparks[i].trail[sparks[i].trail.length-1].z;
				d=((point.x-x)*(point.x-x)+(point.y-y)*(point.y-y)+(point.z-z)*(point.z-z));
				if(d>9){
					sparks[i].trail.push(point);
				}
			}else{
				sparks[i].trail.push(point);
			}
			if(sparks[i].trail.length>5)sparks[i].trail.splice(0,1);
			sparks[i].x+=sparks[i].vx;
			sparks[i].y+=sparks[i].vy;
			sparks[i].z+=sparks[i].vz;
			sparks[i].vx/=1.075;
			sparks[i].vy/=1.075;
			sparks[i].vz/=1.075;
		}else{
			sparks.splice(i,1);
		}
	}
	p=Math.atan2(playerX,playerZ);
	d=Math.sqrt(playerX*playerX+playerZ*playerZ);
	d+=Math.sin(frames/80)/1.25;
	t=Math.sin(frames/200)/40;
	playerX=Math.sin(p+t)*d;
	playerZ=Math.cos(p+t)*d;
	yaw=pi+p+t;
}

function rgb(col){

	var r = parseInt((.5+Math.sin(col)*.5)*16);
	var g = parseInt((.5+Math.cos(col)*.5)*16);
	var b = parseInt((.5-Math.sin(col)*.5)*16);
	return "#"+r.toString(16)+g.toString(16)+b.toString(16);
}

function draw(){

	ctx.clearRect(0,0,cx*2,cy*2);

	ctx.fillStyle="#ff8";
	for(i=-100;i<100;i+=3){
		for(j=-100;j<100;j+=4){
			x=i;z=j;y=25;
			point=rasterizePoint(x,y,z);
			if(point.d!=-1){
				size=250/(1+point.d);
				d = Math.sqrt(x * x + z * z);
				a = 0.75 - Math.pow(d / 100, 6) * 0.75;
				if(a>0){
					ctx.globalAlpha = a;
					ctx.fillRect(point.x-size/2,point.y-size/2,size,size);
				}
			}
		}
	}
	ctx.globalAlpha=1;
	for(i=0;i<seeds.length;++i){
		point=rasterizePoint(seeds[i].x,seeds[i].y,seeds[i].z);
		if(point.d!=-1){
			size=200/(1+point.d);
			ctx.fillRect(point.x-size/2,point.y-size/2,size,size);
		}
	}
	point1=new Object();
	for(i=0;i<sparks.length;++i){
		point=rasterizePoint(sparks[i].x,sparks[i].y,sparks[i].z);
		if(point.d!=-1){
			size=sparks[i].radius*200/(1+point.d);
			if(sparks[i].alpha<0)sparks[i].alpha=0;
			if(sparks[i].trail.length){
				point1.x=point.x;
				point1.y=point.y;
				switch(sparks[i].img){
					case sparkPics[0]:ctx.strokeStyle="#f84";break;
					case sparkPics[1]:ctx.strokeStyle="#84f";break;
					case sparkPics[2]:ctx.strokeStyle="#8ff";break;
					case sparkPics[3]:ctx.strokeStyle="#fff";break;
					case sparkPics[4]:ctx.strokeStyle="#4f8";break;
					case sparkPics[5]:ctx.strokeStyle="#f44";break;
					case sparkPics[6]:ctx.strokeStyle="#f84";break;
					case sparkPics[7]:ctx.strokeStyle="#84f";break;
					case sparkPics[8]:ctx.strokeStyle="#fff";break;
					case sparkPics[9]:ctx.strokeStyle="#44f";break;
				}
				for(j=sparks[i].trail.length-1;j>=0;--j){
					point2=rasterizePoint(sparks[i].trail[j].x,sparks[i].trail[j].y,sparks[i].trail[j].z);
					if(point2.d!=-1){
						ctx.globalAlpha=j/sparks[i].trail.length*sparks[i].alpha/2;
						ctx.beginPath();
						ctx.moveTo(point1.x,point1.y);
						ctx.lineWidth=1+sparks[i].radius*10/(sparks[i].trail.length-j)/(1+point2.d);
						ctx.lineTo(point2.x,point2.y);
						ctx.stroke();
						point1.x=point2.x;
						point1.y=point2.y;
					}
				}
			}
			ctx.globalAlpha=sparks[i].alpha;
			ctx.drawImage(sparks[i].img,point.x-size/2,point.y-size/2,size,size);
		}
	}
}

function frame(){

	if(frames>100000){
		seedTimer=0;
		frames=0;
	}
	frames++;
	draw();
	doLogic();
	requestAnimationFrame(frame);
}

window.addEventListener("resize",()=>{
	if(window.canvas){
	canvas.width=canvas.clientWidth;
	canvas.height=canvas.clientHeight;
	cx=canvas.width/2;
	cy=canvas.height/2;};
});

initVars();

//播放所需的文本 函数
var c=["那天",
"有个人，走进我的记忆",
"学长，我来报名啦",
"好，聪明",
"似乎是在夸曾经的自己",
"阳光 略带冲动又有思考",
"这才是大学生啊",
"谁叫XX？",
"啊？学长 出来一小只",
"还以为会和我一样凶",
"没事 认识认识",
"谁能想到 几小时后",
"这小只教会我了第一句四川话",
"小鬼 以后一定是个好料子",
"背人名真的很难",
"把人和名字对上更难",
"她好像总是很开心 总有疑问",
"习惯了阴影 晒着真不舒服",
"但也就这样认识了第一个女娃",
"她很优秀 除了总回不了消息",
"在高中 这绝对是个榜样",
"但面对自己的正事时 零容忍",
"外人面前",
"我总是一边护一边骂",
"哈 有点累啊",
"后来发现 原来乐观的人也不是傻",
"这女孩还有细腻的一面",
"世上本无对错 只有好与不好",
"那这因果 动便动了",
"家伙 迷茫不知道方向的时候",
"要记着 往有光的地方走",
"还有 人虽然不能太势利",
"但趋利避害是生存法则",
"不要轻易暴露自己的弱点",
"有事也别光憋着",
"气球越大越脆弱 人亦然",
"有时候 我觉得她长大了",
"就像现在 害怕自己变老",
"姑娘 成长 得得失失",
"考虑要理智 抉择要果断",
"最关键的 莫后悔 莫虚度",
"决定外界的不是面具 而是实力",
"所以请继续坚持自律吧",
"活生生的资源也学着用啊",
"蓉儿姐总说 跟个老妈子一样 额",
"嗨 只是担心没用了罢了",
"当然 现在要考虑的是",
"该祝福些什么好呢",
"本来已经够人美心善了 对吧",
"奥有句话 忘了对她说了",
"你 那天拍的冬青卫矛",
"确实好看 我很喜欢",
"找不到自己找去",
"那就 听歌吧",
"生日快乐 家伙",
"生日快乐 家伙",
"对了 要好好吃饭啊",
"正在播放",
"周杰伦婚礼现场音乐"
];
//切换背景函数
var img=new Image();
img.src='http://jxts.miquanbao.com/birthday/static/1.jpg';
function go(n){
		if (timego){clearTimeout(timego)};
		// if (0<n<59){alert(1);return go(n+1);}else if (n==59){return};
		var num=Number(n)+1;
		var timego=setTimeout(function(){
			document.title=c[n];
			switch (true){
				case num<52:
					document.querySelector("#doo").style.backgroundImage='url(http://jxts.miquanbao.com/birthday/static/'+num+'.jpg)';
					img.src ='http://jxts.miquanbao.com/birthday/static/'+ ++num+'.jpg';
					break;
				case num==52:
					document.querySelector("#doo").style.backgroundImage='url(http://jxts.miquanbao.com/birthday/static/52.jpg)';
					img.src='http://jxts.miquanbao.com/birthday/static/01.gif';
					break;
				case num==56:
					document.querySelector("#doo").style.backgroundImage='url(http://jxts.miquanbao.com/birthday/static/01.gif)';
					img.src='http://jxts.miquanbao.com/birthday/static/02.gif';
					break;
				case num==59:
					document.querySelector("#doo").style.backgroundImage='url(http://jxts.miquanbao.com/birthday/static/02.gif)';
					return;
					break;
				default:
					break;
			};
			go(n+1);
		},6000);
		
	};

//点击开始 播放音乐 特效等
//在华为的微信浏览器中由于prompt无效，只能使用模态来触发绑定
function start(){
	var audio=document.querySelector('audio');
	audio.play();
	audio.onended=function(){alert("您无需手动获取令牌\n请在评论区探索\n建议您使用其他身份再尝试一次可能有新发现哦")};
	audio=null;
	document.title='好吧确实是你';
	S.init();
	var timeout=setTimeout(function(){
		frame();
	},5500);
	// frame();
	var timeout1=setTimeout(function(){
		go(0);
		var el=document.querySelector("#canvas");
		var el2=document.querySelector("body");
		el2.style.backgroundImage='url(http://jxts.miquanbao.com/birthday/static/01.gif)';
		el.remove();
		el=el2=null;
	},28500);
	document.querySelector('body').onclick=null;
};
$("#sure").click(function(){
    var verify1=$("#input").val()
	if(md5(verify1)!='885be43d5597d274cfb6e7953a13f6f4'){
		document.querySelector('html').remove();window.location.href="not.html?a=|#countdown 3||"+verify1+"|You|are|Awesome|and|I|Like|U|❤|"
		}else{
			alert("您回来了\n请您调整音量后点击确定\n然后点击屏幕以开始\n（背景音在耳机环境下测试，您的身份无需手动获取令牌）");
			// document.querySelector('body').onclick=function(){
				start();
// };
};
})
$(function() {
     $("#trig").click();
    //  setTimeout(function(){$("#input").focus();},1000);
});</script></body></html>
